#include <iostream>

#include "partition.h"

using namespace std;

int main()
{
    /* Test Data */
    float coordinates12[120][2] = {{114.171475f,22.320358f},
                                   {114.170705f,22.324115f},
                                   {114.170572f,22.324995f},
                                   {114.173383f,22.325471f},
                                   {114.173486f,22.325434f},
                                   {114.173488f,22.325326f},
                                   {114.173253f,22.324917f},
                                   {114.173931f,22.325047f},
                                   {114.17462f,22.326387f},
                                   {114.174603f,22.32653f},
                                   {114.174072f,22.326701f},
                                   {114.172861f,22.326645f}};

    float coordinates120[120][2] = {{114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f},
                                    {114.171475f,22.320358f},
                                    {114.170705f,22.324115f},
                                    {114.170572f,22.324995f},
                                    {114.173383f,22.325471f},
                                    {114.173486f,22.325434f},
                                    {114.173488f,22.325326f},
                                    {114.173253f,22.324917f},
                                    {114.173931f,22.325047f},
                                    {114.17462f,22.326387f},
                                    {114.174603f,22.32653f},
                                    {114.174072f,22.326701f},
                                    {114.172861f,22.326645f}};

    int N = 12;
    vector<unsigned> nodes(N);
    for(unsigned i = 0; i < N; i++)
    {
        nodes[i] = i;
    }

    vector<float> longi(N);
    vector<float> lat(N);
    for(int i = 0; i < N; i++)
    {
        longi[i] = coordinates12[i][0];
        lat[i] = coordinates12[i][1];
    }

    /* Driver */
    int k = 2;
    int l = 3;
    IMS::Partition::partition_t * p = IMS::Partition::do_partition(nodes, lat, longi, k, l, 0);
    IMS::Partition::index_partition(p);
    auto layer = IMS::Partition::build_layer(p, lat.size());

    IMS::Partition::print_partition(p);
    cout << endl << endl;

    IMS::Partition::print_layer(layer);
    cout << endl << endl;

    cout << IMS::Partition::find_parent(layer, 4, 2);
    cout << endl;
    cout << IMS::Partition::find_parent(layer, 4);
    
    IMS::Partition::delete_partition(p);
}